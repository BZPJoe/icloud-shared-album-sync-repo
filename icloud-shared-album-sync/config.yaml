name: iCloud Shared Album Sync
slug: icloud_shared_album_sync
description: Sync one or more PUBLIC iCloud Shared Albums to /media or /config/www. Generates index.json, latest.jpg, and prunes by age/count. Optional mirror mode.
version: "0.4.3"  # Updated to match current version
arch:
  - aarch64
  - amd64
  - armv7
init: false
startup: services
boot: auto
map:
  - config:rw
  - ssl:ro
  - share:rw
  - media:rw

# ---------- Global defaults (each album can override) ----------
options:
  keep_days: 0
  max_files: 500
  timeout: 40
  interval_minutes: 180
  debug: false
  mirror_missing: true
  albums: |
    - name: Family Photos
      shared_url: "https://www.icloud.com/sharedalbum/#XXXXXXXXXXXXXXX"
      dest_mode: media
      media_subfolder: "iCloud"
      album_subfolder: "family"
      latest_filename: "latest.jpg"
      index_filename: "index.json"

schema:
  keep_days: int
  max_files: int
  timeout: int
  interval_minutes: int
  debug: bool
  mirror_missing: bool
  albums: str   # ‚Üê IMPORTANT: plain string (shown as YAML editor in UI)
